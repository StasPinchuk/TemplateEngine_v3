<Window x:Class="TemplateEngine_v3.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:control="clr-namespace:TemplateEngine_v3.UserControls"
        xmlns:local="clr-namespace:TemplateEngine_v3"
        mc:Ignorable="d"
        MinWidth="950"
        MinHeight="600"
        Style="{DynamicResource MaterialDesignWindow}"
        WindowStartupLocation="CenterScreen"
        Title="Редактор шаблонов">


    <materialDesign:DialogHost Identifier="MainDialog">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="SideBar"
                                  MinWidth="80"
                                  MaxWidth="300"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Background="#181F2C"
                    Grid.Column="0"
                    Padding="10, 20">
                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition MaxHeight="35"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <control:SideNavigation MenuList="{Binding MenuItems, UpdateSourceTrigger=PropertyChanged}"
                                            CurrentFrame="{Binding ElementName=MainFrame}"
                                            SideBar="{Binding ElementName=SideBar}"
                                            OpenPageCommand="{Binding OpenPageCommand}"
                                            Grid.Row="0"/>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalContentAlignment="Left"
                            Command="{Binding SaveToJsonCommand}"
                            Foreground="#FFF"
                            Grid.Row="1">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="ContentSave"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Сохранить данные в файлы"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalContentAlignment="Left"
                            Command="{Binding ReplaceValueInTemplateCommand}"
                            Foreground="#FFF"
                            Grid.Row="2">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="FindReplace"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Заменить значение в шаблонах"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalContentAlignment="Left"
                            Command="{Binding DetailTypeListCommand}"
                            Foreground="#FFF"
                            Visibility="{Binding IsAdminVisibility, UpdateSourceTrigger=PropertyChanged}"
                            Grid.Row="3">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="Category"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" Cursor="Hand" />

                            <TextBlock Text="Типы деталей"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalContentAlignment="Left"
                            Foreground="#FFF"
                            Grid.Row="4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="Book"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Открыть справку"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding OpenLogsCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="#FFF"
                            Visibility="{Binding IsAdminVisibility, UpdateSourceTrigger=PropertyChanged}"
                            Grid.Row="5">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="ListStatus"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Открыть логи"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding OpenTemplateStagesCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="#FFF"
                            Visibility="{Binding IsAdminVisibility, UpdateSourceTrigger=PropertyChanged}"
                            Grid.Row="6">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="ListStatus"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Стадии шаблонов"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            HorizontalContentAlignment="Left"
                            Foreground="#FFF"
                            VerticalAlignment="Bottom"
                            Visibility="{Binding IsAdminVisibility, UpdateSourceTrigger=PropertyChanged}"
                            Command="{Binding OpenSettingsCommand}"
                            Grid.Row="7">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="24"
                                                     Height="24"
                                                     Kind="Settings"
                                                     Foreground="#FFF"
                                                     VerticalAlignment="Center" />

                            <TextBlock Text="Настройки"
                                       TextWrapping="Wrap"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>

            <GridSplitter Width="2"
                          VerticalAlignment="Stretch"
                          Background="LightGray"
                          ResizeBehavior="PreviousAndNext"
                          Grid.Column="1"/>

            <Grid Grid.Column="2">

                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Border Background="#FFF"
                        BorderBrush="#D5D7DA"
                        BorderThickness="0,0,0,2"
                        Grid.Row="0">
                    <Grid>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>

                        <ListBox x:Name="TabsListBox"
                                 ItemsSource="{Binding TabsItem, UpdateSourceTrigger=PropertyChanged}"
                                 SelectedItem="{Binding SelectedTab, UpdateSourceTrigger=PropertyChanged}"
                                 SelectionChanged="TabsListBox_SelectionChanged"
                                 ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                 ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                 Cursor="Hand">

                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>

                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal"
                                                MaxHeight="30">
                                        <TextBlock Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" 
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,10,0"/>
                                        <Button Command="{Binding DataContext.CloseTabCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                VerticalAlignment="Center">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <materialDesign:PackIcon Kind="Close"
                                                                                VerticalAlignment="Center"
                                                                                Foreground="Red"
                                                                                Background="Transparent" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <Button Grid.Column="2" 
                                x:Name="ScrollLeftButton"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Width="20"
                                Padding="0"
                                Click="ScrollLeft_Click">
                            <materialDesign:PackIcon Kind="ArrowLeft"
                                                     VerticalAlignment="Center"
                                                     Foreground="Black"
                                                     Background="Transparent" />
                        </Button>

                        <Button Grid.Column="4" 
                                x:Name="ScrollRightButton"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Width="20"
                                Padding="0"
                                Click="ScrollRight_Click">
                            <materialDesign:PackIcon Kind="ArrowRight"
                                                     VerticalAlignment="Center"
                                                     Foreground="Black"
                                                     Background="Transparent" />
                        </Button>
                    </Grid>
                </Border>
                

                <Frame x:Name="MainFrame"
                       Grid.Row="1"
                       NavigationUIVisibility="Hidden"/>
            </Grid>

        </Grid>
    </materialDesign:DialogHost>
</Window>
